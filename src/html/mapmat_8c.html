<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>MIDAPACK - MIcrowave Data Analysis PACKage: mapmat.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logoANR-MIDAS09_quarter.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MIDAPACK - MIcrowave Data Analysis PACKage
   &#160;<span id="projectnumber">1.0beta</span>
   </div>
   <div id="projectbrief">Parallel software tools for high performance CMB DA analysis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mapmat_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mapmat.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Matrix routines implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;mapmat.h&quot;</code><br/>
</div>
<p><a href="mapmat_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaffd7a76c3cf2834df302d1f844aea3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#aaffd7a76c3cf2834df302d1f844aea3e">MatInit</a> (Mat *A, int m, int nnz, int *indices, double *values, int flag)</td></tr>
<tr class="memitem:aaf26c7678367e6757392c03abd22a105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#aaf26c7678367e6757392c03abd22a105">MatSetIndices</a> (Mat *A, int m, int nnz, int *indices)</td></tr>
<tr class="memitem:ad3d5adb742e7a82454fcd6eede21da91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#ad3d5adb742e7a82454fcd6eede21da91">MatSetValues</a> (Mat *A, int m, int nnz, double *values)</td></tr>
<tr class="memitem:a4e1732c63feba9e589b5037d0a25ab75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a4e1732c63feba9e589b5037d0a25ab75">MatFree</a> (Mat *A)</td></tr>
<tr class="memitem:a56b5e9bda4e4ad0a2c4f2f12e94d077e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a56b5e9bda4e4ad0a2c4f2f12e94d077e">MatLoad</a> (Mat *mat, char *filename)</td></tr>
<tr class="memitem:a792b187cf2f23e526ecd5e2c3cbb9dab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a792b187cf2f23e526ecd5e2c3cbb9dab">MatSave</a> (Mat *mat, char *filename)</td></tr>
<tr class="memitem:ae31f7ccb10cda5c97e49f640feed1ad4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#ae31f7ccb10cda5c97e49f640feed1ad4">MatLocalShape</a> (Mat *A, int sflag)</td></tr>
<tr class="memitem:af757d9249d31d2839b3376ac2e3f5574"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#af757d9249d31d2839b3376ac2e3f5574">MatVecProd</a> (Mat *A, double *x, double *y, int pflag)</td></tr>
<tr class="memitem:a1a51d7e8153d33045482100bbd07d0a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a1a51d7e8153d33045482100bbd07d0a9">TrMatVecProd</a> (Mat *A, double *y, double *x, int pflag)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Matrix routines implementation. </p>
<dl class="section note"><dt>Note:</dt><dd>Copyright (c) 2010-2012 APC CNRS Universit√© Paris Diderot. This program is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the GNU General Public License along with this program; if not, see <a href="http://www.gnu.org/licenses/lgpl.html">http://www.gnu.org/licenses/lgpl.html</a></dd>
<dd>
For more information about ANR MIDAS'09 project see <a href="http://www.apc.univ-paris7.fr/APC_CS/Recherche/Adamis/MIDAS09/index.html">http://www.apc.univ-paris7.fr/APC_CS/Recherche/Adamis/MIDAS09/index.html</a> </dd>
<dd>
ACKNOWLEDGMENT: This work has been supported in part by the French National Research Agency (ANR) through COSINUS program (project MIDAS no. ANR-09-COSI-009). </dd></dl>
<dl class="section author"><dt>Author:</dt><dd>Pierre Cargemel </dd></dl>
<dl class="section date"><dt>Date:</dt><dd>November 2011 </dd></dl>

<p>Definition in file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="aaffd7a76c3cf2834df302d1f844aea3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatInit </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nnz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a matrix specifying the number of local rows m, the number of non-zero elements per row nnz , indices tab, values tab, flag for communication and a communicator comm. indices and values tabs must be allocated and contain at least m*nnz elements. It represents column indices of the nonzero elements. Respectively values tab represents the non-zero values. After call MatInit, all precomputation are done and the matrix structure is ready to use. That means you can start applying matrix operation. Another way to initialize a matrix structure is to apply step by step :</p>
<ul>
<li>MatSetIndices</li>
<li>MatSetValues</li>
<li>MatLocalShape</li>
<li>MatComShape</li>
</ul>
<dl class="section warning"><dt>Warning:</dt><dd>do not modify indices tab until you will use the matrix structure. </dd>
<dd>
[MPI COMM!] with Midapack sequential version, there is no communicator argument. </dd></dl>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat struct </td></tr>
    <tr><td class="paramname">m</td><td>number of local rows </td></tr>
    <tr><td class="paramname">nnz</td><td>number of non-zero per row </td></tr>
    <tr><td class="paramname">indices</td><td>input tab (modified) </td></tr>
    <tr><td class="paramname">values</td><td>input tab </td></tr>
    <tr><td class="paramname">flag</td><td>communication flag </td></tr>
    <tr><td class="paramname">comm</td><td>MPI communicator</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="mapmat_8c.html#a4e1732c63feba9e589b5037d0a25ab75">MatFree</a> </dd></dl>

<p>Definition at line <a class="el" href="mapmat_8c_source.html#l00043">43</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaf26c7678367e6757392c03abd22a105"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MatSetIndices </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nnz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>indices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set column indices of the nonzero elements. indices tab must be allocated and contains at least m*nnz elements. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat struct </td></tr>
    <tr><td class="paramname">m</td><td>number of local rows </td></tr>
    <tr><td class="paramname">nnz</td><td>number of non-zero per row </td></tr>
    <tr><td class="paramname">indices</td><td>input tab </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="mapmat_8c_source.html#l00070">70</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad3d5adb742e7a82454fcd6eede21da91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MatSetValues </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nnz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set values of the nonzero elements. values tab must be allocated and contains at least m*nnz values. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat struct </td></tr>
    <tr><td class="paramname">m</td><td>number of local rows </td></tr>
    <tr><td class="paramname">nnz</td><td>number of non-zero per row </td></tr>
    <tr><td class="paramname">values</td><td>input tab </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="mapmat_8c_source.html#l00085">85</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4e1732c63feba9e589b5037d0a25ab75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MatFree </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free allocated tabs of a matrix structure including local indices tab and communication tabs. Do not free indices and values which user is responsible for. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat struct </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="mapmat_8c.html#aaffd7a76c3cf2834df302d1f844aea3e">MatInit</a> <a class="el" href="mapmat_8c.html#ae31f7ccb10cda5c97e49f640feed1ad4">MatLocalShape</a> </dd></dl>

<p>Definition at line <a class="el" href="mapmat_8c_source.html#l00099">99</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a class="anchor" id="a56b5e9bda4e4ad0a2c4f2f12e94d077e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatLoad </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load matrix from a file. This is MatSave dual routine which loads data into matrix reading a specified file (or several specified files). Number of files should equal number of processor. File format should be ascii files (for examples look at files generated by MapMatSave routine). </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Implement to read several file formats as basic ASCII, XML, HDF5... </dd></dl>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">mat</td><td>pointer to the Mat </td></tr>
    <tr><td class="paramname">filename</td><td>basename of a file, actually data are loaded from several files denotes by "basename + processor number" </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>error code </dd></dl>

<p>Definition at line <a class="el" href="mapmat_8c_source.html#l00153">153</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a class="anchor" id="a792b187cf2f23e526ecd5e2c3cbb9dab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatSave </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write matrix into files This is the dual routine of MatLoad. It saves matrix data into files, and can be usefull to check that data are well stored. Obviously it performs IO, moreover with one file per processor. Therfore, just call this function in a development phase, with few data and few processors. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to the Mat </td></tr>
    <tr><td class="paramname">filename</td><td>file basename, for instance passing "toto" should produce the output files named "toto_$(rank)" </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>error code </dd></dl>

<p>Definition at line <a class="el" href="mapmat_8c_source.html#l00201">201</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae31f7ccb10cda5c97e49f640feed1ad4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatLocalShape </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute a local indices into a dense vector, lindices, and reindices indices tab according the this local dense vector. For this three steps are performed :</p>
<ul>
<li>sort and merge indices tab,</li>
<li>allocate lindices of size lcount and copy the sorted indices</li>
<li>reindex indices according the local indices</li>
</ul>
<dl class="section warning"><dt>Warning:</dt><dd>lindices is internally allocated ( to free it, use MatFree ) </dd></dl>
<dl class="section see"><dt>See also:</dt><dd>MatComShape <a class="el" href="mapmat_8c.html#a4e1732c63feba9e589b5037d0a25ab75">MatFree</a> <a class="el" href="mapmat_8c.html#aaf26c7678367e6757392c03abd22a105">MatSetIndices</a> </dd></dl>

<p>Definition at line <a class="el" href="mapmat_8c_source.html#l00239">239</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a class="anchor" id="af757d9249d31d2839b3376ac2e3f5574"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatVecProd </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform matrix-vector multiplication, <img class="formulaInl" alt="$y \leftarrow A x$" src="form_24.png"/>. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat </td></tr>
    <tr><td class="paramname">x</td><td>input vector (overlapped) </td></tr>
    <tr><td class="paramname">y</td><td>output vector (distributed) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mapmat_8c_source.html#l00352">352</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1a51d7e8153d33045482100bbd07d0a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TrMatVecProd </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a transposed matrix-vector multiplication, <img class="formulaInl" alt="$x \leftarrow A^t y$" src="form_25.png"/> using a precomputed communication scheme. Before calling this routine, the communication structure should have been set, calling MatInit or MatComShape. The routine can be divided in two steps :</p>
<ul>
<li>a local matrix vector multiplication</li>
<li>a collective-reduce. it consits in a sum reduce over all processes.</li>
</ul>
<p>The collective reduce is performed using algorithm previously defined : ring, butterfly ... </p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="mapmat_8c.html#af757d9249d31d2839b3376ac2e3f5574">MatVecProd</a> MatComShape TrMatVecProd_Naive <a class="el" href="mapmat_8c.html#aaffd7a76c3cf2834df302d1f844aea3e">MatInit</a> </dd></dl>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>a pointer to a Mat </td></tr>
    <tr><td class="paramname">y</td><td>local input vector (distributed) </td></tr>
    <tr><td class="paramname">x</td><td>local output vector (overlapped) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mapmat_8c_source.html#l00445">445</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8c8771d589320e8518161c4534c99c34.html">mapmat</a></li><li class="navelem"><a class="el" href="mapmat_8c.html">mapmat.c</a></li>
    <li class="footer">Generated on Fri Jul 12 2013 10:34:53 for MIDAPACK - MIcrowave Data Analysis PACKage by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.1 </li>
  </ul>
</div>
</body>
</html>
