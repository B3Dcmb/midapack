<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIDAPACK - MIcrowave Data Analysis PACKage: mapmat.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logoANR-MIDAS09_quarter.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIDAPACK - MIcrowave Data Analysis PACKage
   &#160;<span id="projectnumber">1.1b</span>
   </div>
   <div id="projectbrief">Parallel software tools for high performance CMB DA analysis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('mapmat_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mapmat.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Matrix routines implementation.  
<a href="#details">More...</a></p>

<p><a href="mapmat_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a38bb561b83b6df1660a4b0fe09ad13f5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a38bb561b83b6df1660a4b0fe09ad13f5">MatInit</a> (Mat *A, int m, int nnz, int *indices, double *values, int flag #ifdef W_MPI, MPI_Comm comm #endif)</td></tr>
<tr class="separator:a38bb561b83b6df1660a4b0fe09ad13f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf26c7678367e6757392c03abd22a105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#aaf26c7678367e6757392c03abd22a105">MatSetIndices</a> (Mat *A, int m, int nnz, int *indices)</td></tr>
<tr class="separator:aaf26c7678367e6757392c03abd22a105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3d5adb742e7a82454fcd6eede21da91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#ad3d5adb742e7a82454fcd6eede21da91">MatSetValues</a> (Mat *A, int m, int nnz, double *values)</td></tr>
<tr class="separator:ad3d5adb742e7a82454fcd6eede21da91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad10eb11039e919a4596a6f1cc5abe812"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#ad10eb11039e919a4596a6f1cc5abe812">CommInfo</a> (Mat *A)</td></tr>
<tr class="separator:ad10eb11039e919a4596a6f1cc5abe812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f1974406caa5205fdada6efa9ca2798"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a6f1974406caa5205fdada6efa9ca2798">MatReset</a> (Mat *A)</td></tr>
<tr class="separator:a6f1974406caa5205fdada6efa9ca2798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e1732c63feba9e589b5037d0a25ab75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a4e1732c63feba9e589b5037d0a25ab75">MatFree</a> (Mat *A)</td></tr>
<tr class="separator:a4e1732c63feba9e589b5037d0a25ab75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b5e9bda4e4ad0a2c4f2f12e94d077e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a56b5e9bda4e4ad0a2c4f2f12e94d077e">MatLoad</a> (Mat *mat, char *filename)</td></tr>
<tr class="separator:a56b5e9bda4e4ad0a2c4f2f12e94d077e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a792b187cf2f23e526ecd5e2c3cbb9dab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a792b187cf2f23e526ecd5e2c3cbb9dab">MatSave</a> (Mat *mat, char *filename)</td></tr>
<tr class="separator:a792b187cf2f23e526ecd5e2c3cbb9dab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae31f7ccb10cda5c97e49f640feed1ad4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#ae31f7ccb10cda5c97e49f640feed1ad4">MatLocalShape</a> (Mat *A, int sflag)</td></tr>
<tr class="separator:ae31f7ccb10cda5c97e49f640feed1ad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61b3b348d7c039aadfc3196e6b83535a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a61b3b348d7c039aadfc3196e6b83535a">MatComShape</a> (Mat *A, int flag, MPI_Comm comm)</td></tr>
<tr class="separator:a61b3b348d7c039aadfc3196e6b83535a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af757d9249d31d2839b3376ac2e3f5574"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#af757d9249d31d2839b3376ac2e3f5574">MatVecProd</a> (Mat *A, double *x, double *y, int pflag)</td></tr>
<tr class="separator:af757d9249d31d2839b3376ac2e3f5574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ad4af50377be15a0aa50f416a53ade"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a46ad4af50377be15a0aa50f416a53ade">TrMatVecProd_Naive</a> (Mat *A, double *y, double *x, int pflag)</td></tr>
<tr class="separator:a46ad4af50377be15a0aa50f416a53ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a51d7e8153d33045482100bbd07d0a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a1a51d7e8153d33045482100bbd07d0a9">TrMatVecProd</a> (Mat *A, double *y, double *x, int pflag)</td></tr>
<tr class="separator:a1a51d7e8153d33045482100bbd07d0a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e522200e7c693e4d81ff3ce3a1e24ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a8e522200e7c693e4d81ff3ce3a1e24ff">MatInfo</a> (Mat *mat, int verbose, char *filename)</td></tr>
<tr class="memdesc:a8e522200e7c693e4d81ff3ce3a1e24ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print information about a matrix. <br  />
 Usefull function to check, debug or bench. It prints matrix array sizes.  <a href="mapmat_8c.html#a8e522200e7c693e4d81ff3ce3a1e24ff">More...</a><br /></td></tr>
<tr class="separator:a8e522200e7c693e4d81ff3ce3a1e24ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6ed129adf6485b891280470ba4e6df"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mapmat_8c.html#a8b6ed129adf6485b891280470ba4e6df">greedyreduce</a> (Mat *A, double *x)</td></tr>
<tr class="separator:a8b6ed129adf6485b891280470ba4e6df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Matrix routines implementation. </p>
<dl class="section note"><dt>Note</dt><dd>Copyright (c) 2010-2012 APC CNRS Université Paris Diderot. This program is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the GNU General Public License along with this program; if not, see <a href="http://www.gnu.org/licenses/lgpl.html">http://www.gnu.org/licenses/lgpl.html</a> </dd>
<dd>
For more information about ANR MIDAS'09 project see <a href="http://www.apc.univ-paris7.fr/APC_CS/Recherche/Adamis/MIDAS09/index.html">http://www.apc.univ-paris7.fr/APC_CS/Recherche/Adamis/MIDAS09/index.html</a> </dd>
<dd>
ACKNOWLEDGMENT: This work has been supported in part by the French National Research Agency (ANR) through COSINUS program (project MIDAS no. ANR-09-COSI-009). </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Pierre Cargemel </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 2011 </dd></dl>

<p class="definition">Definition in file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a38bb561b83b6df1660a4b0fe09ad13f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38bb561b83b6df1660a4b0fe09ad13f5">&#9670;&nbsp;</a></span>MatInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatInit </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nnz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int flag #ifdef&#160;</td>
          <td class="paramname"><em>W_MPI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Comm comm #&#160;</td>
          <td class="paramname"><em>endif</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a matrix specifying the number of local rows m, the number of non-zero elements per row nnz , indices tab, values tab, ts_flags tab, flag for communication and a communicator comm. indices and values tabs must be allocated and contain at least m*nnz elements. It represents column indices of the nonzero elements. Respectively values tab represents the non-zero values. After call MatInit, all precomputation are done and the matrix structure is ready to use. That means you can start applying matrix operation. Another way to initialize a matrix structure is to apply step by step :</p><ul>
<li>MatSetIndices</li>
<li>MatSetValues</li>
<li>MatLocalShape</li>
<li>MatComShape <dl class="section warning"><dt>Warning</dt><dd>do not modify indices tab until you will use the matrix structure. </dd>
<dd>
[MPI COMM!] with Midapack sequential version, there is no communicator argument. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat struct </td></tr>
    <tr><td class="paramname">m</td><td>number of local rows </td></tr>
    <tr><td class="paramname">nnz</td><td>number of non-zero per row </td></tr>
    <tr><td class="paramname">indices</td><td>input tab (modified) </td></tr>
    <tr><td class="paramname">values</td><td>input tab </td></tr>
    <tr><td class="paramname">flag</td><td>communication flag </td></tr>
    <tr><td class="paramname">comm</td><td>MPI communicator</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mapmat_8c.html#a4e1732c63feba9e589b5037d0a25ab75">MatFree</a> </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00054">54</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="aaf26c7678367e6757392c03abd22a105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf26c7678367e6757392c03abd22a105">&#9670;&nbsp;</a></span>MatSetIndices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MatSetIndices </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nnz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>indices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set column indices of the nonzero elements. indices tab must be allocated and contains at least m*nnz elements. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat struct </td></tr>
    <tr><td class="paramname">m</td><td>number of local rows </td></tr>
    <tr><td class="paramname">nnz</td><td>number of non-zero per row </td></tr>
    <tr><td class="paramname">indices</td><td>input tab </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00083">83</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="ad3d5adb742e7a82454fcd6eede21da91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3d5adb742e7a82454fcd6eede21da91">&#9670;&nbsp;</a></span>MatSetValues()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MatSetValues </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nnz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set values of the nonzero elements. values tab must be allocated and contains at least m*nnz values. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat struct </td></tr>
    <tr><td class="paramname">m</td><td>number of local rows </td></tr>
    <tr><td class="paramname">nnz</td><td>number of non-zero per row </td></tr>
    <tr><td class="paramname">values</td><td>input tab </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00097">97</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="ad10eb11039e919a4596a6f1cc5abe812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad10eb11039e919a4596a6f1cc5abe812">&#9670;&nbsp;</a></span>CommInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CommInfo </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00106">106</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="a6f1974406caa5205fdada6efa9ca2798"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f1974406caa5205fdada6efa9ca2798">&#9670;&nbsp;</a></span>MatReset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MatReset </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00255">255</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="a4e1732c63feba9e589b5037d0a25ab75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e1732c63feba9e589b5037d0a25ab75">&#9670;&nbsp;</a></span>MatFree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MatFree </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free allocated tabs of a matrix structure including local indices tab and communication tabs. Do not free indices and values which user is responsible for. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat struct </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mapmat_8c.html#a38bb561b83b6df1660a4b0fe09ad13f5">MatInit</a> <a class="el" href="mapmat_8c.html#ae31f7ccb10cda5c97e49f640feed1ad4">MatLocalShape</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00323">323</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="a56b5e9bda4e4ad0a2c4f2f12e94d077e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56b5e9bda4e4ad0a2c4f2f12e94d077e">&#9670;&nbsp;</a></span>MatLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatLoad </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load matrix from a file. This is MatSave dual routine which loads data into matrix reading a specified file (or several specified files). Number of files should equal number of processor. File format should be ascii files (for examples look at files generated by MapMatSave routine). </p><dl class="section warning"><dt>Warning</dt><dd>Does not include gap samples flags functionality </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Implement to read several file formats as basic ASCII, XML, HDF5... </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mat</td><td>pointer to the Mat </td></tr>
    <tr><td class="paramname">filename</td><td>basename of a file, actually data are loaded from several files denotes by "basename + processor number" </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00414">414</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="a792b187cf2f23e526ecd5e2c3cbb9dab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a792b187cf2f23e526ecd5e2c3cbb9dab">&#9670;&nbsp;</a></span>MatSave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatSave </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write matrix into files This is the dual routine of MatLoad. It saves matrix data into files, and can be usefull to check that data are well stored. Obviously it performs IO, moreover with one file per processor. Therfore, just call this function in a development phase, with few data and few processors. </p><dl class="section warning"><dt>Warning</dt><dd>Does not include gap samples flags functionality. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to the Mat </td></tr>
    <tr><td class="paramname">filename</td><td>file basename, for instance passing "toto" should produce the output files named "toto_$(rank)" </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00460">460</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="ae31f7ccb10cda5c97e49f640feed1ad4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae31f7ccb10cda5c97e49f640feed1ad4">&#9670;&nbsp;</a></span>MatLocalShape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatLocalShape </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute a local indices into a dense vector, lindices, and reindices indices tab according the this local dense vector. For this three steps are performed :</p><ul>
<li>sort and merge indices tab,</li>
<li>allocate lindices of size lcount and copy the sorted indices</li>
<li>reindex indices according the local indices</li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>lindices is internally allocated ( to free it, use MatFree ) </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mapmat_8c.html#a61b3b348d7c039aadfc3196e6b83535a">MatComShape</a> <a class="el" href="mapmat_8c.html#a4e1732c63feba9e589b5037d0a25ab75">MatFree</a> <a class="el" href="mapmat_8c.html#aaf26c7678367e6757392c03abd22a105">MatSetIndices</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00496">496</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="a61b3b348d7c039aadfc3196e6b83535a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61b3b348d7c039aadfc3196e6b83535a">&#9670;&nbsp;</a></span>MatComShape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatComShape </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Comm&#160;</td>
          <td class="paramname"><em>comm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transform the matrix data structure, identifying columns shared by several processors </p><dl class="section warning"><dt>Warning</dt><dd>[MPI ONLY!] this function does not exist in Midapack sequential version </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mapmat_8c.html#ae31f7ccb10cda5c97e49f640feed1ad4">MatLocalShape</a> <a class="el" href="mapmat_8c.html#a38bb561b83b6df1660a4b0fe09ad13f5">MatInit</a> <a class="el" href="mapmat_8c.html#a1a51d7e8153d33045482100bbd07d0a9">TrMatVecProd</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00530">530</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="af757d9249d31d2839b3376ac2e3f5574"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af757d9249d31d2839b3376ac2e3f5574">&#9670;&nbsp;</a></span>MatVecProd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatVecProd </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform matrix-vector multiplication, <img class="formulaInl" alt="$y \leftarrow A x$" src="form_4.png" width="44" height="13"/>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to a Mat </td></tr>
    <tr><td class="paramname">x</td><td>input vector (overlapped) </td></tr>
    <tr><td class="paramname">y</td><td>output vector (distributed) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00704">704</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="a46ad4af50377be15a0aa50f416a53ade"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46ad4af50377be15a0aa50f416a53ade">&#9670;&nbsp;</a></span>TrMatVecProd_Naive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TrMatVecProd_Naive </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform transposed matrix-vector multiplication, <img class="formulaInl" alt="$x \leftarrow A^t y$" src="form_5.png" width="48" height="14"/>. This naive version does not require a precomputed communication structure. But communication volumes may be significant. Consequently in most of the cases is not optimized. </p><dl class="section warning"><dt>Warning</dt><dd>[MPI ONLY!] this function does not exist in Midapack sequential version </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mapmat_8c.html#a1a51d7e8153d33045482100bbd07d0a9">TrMatVecProd</a> <a class="el" href="mapmat_8c.html#ae31f7ccb10cda5c97e49f640feed1ad4">MatLocalShape</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mat</td><td>pointer </td></tr>
    <tr><td class="paramname">y</td><td>local input vector (distributed) </td></tr>
    <tr><td class="paramname">x</td><td>local output vector (overlapped) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00744">744</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="a1a51d7e8153d33045482100bbd07d0a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a51d7e8153d33045482100bbd07d0a9">&#9670;&nbsp;</a></span>TrMatVecProd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TrMatVecProd </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform a transposed matrix-vector multiplication, <img class="formulaInl" alt="$x \leftarrow A^t y$" src="form_5.png" width="48" height="14"/> using a precomputed communication scheme. Before calling this routine, the communication structure should have been set, calling MatInit or MatComShape. The routine can be divided in two steps :</p><ul>
<li>a local matrix vector multiplication</li>
<li>a collective-reduce. it consits in a sum reduce over all processes.</li>
</ul>
<p>The collective reduce is performed using algorithm previously defined : ring, butterfly ... </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="mapmat_8c.html#af757d9249d31d2839b3376ac2e3f5574">MatVecProd</a> <a class="el" href="mapmat_8c.html#a61b3b348d7c039aadfc3196e6b83535a">MatComShape</a> <a class="el" href="mapmat_8c.html#a46ad4af50377be15a0aa50f416a53ade">TrMatVecProd_Naive</a> <a class="el" href="mapmat_8c.html#a38bb561b83b6df1660a4b0fe09ad13f5">MatInit</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>a pointer to a Mat </td></tr>
    <tr><td class="paramname">y</td><td>local input vector (distributed) </td></tr>
    <tr><td class="paramname">x</td><td>local output vector (overlapped) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00819">819</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="a8e522200e7c693e4d81ff3ce3a1e24ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e522200e7c693e4d81ff3ce3a1e24ff">&#9670;&nbsp;</a></span>MatInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MatInfo </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>mat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verbose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print information about a matrix. <br  />
 Usefull function to check, debug or bench. It prints matrix array sizes. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="mapmat_8c.html#a792b187cf2f23e526ecd5e2c3cbb9dab">MatSave</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to the Mat </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l00867">867</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
<a id="a8b6ed129adf6485b891280470ba4e6df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b6ed129adf6485b891280470ba4e6df">&#9670;&nbsp;</a></span>greedyreduce()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int greedyreduce </td>
          <td>(</td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mapmat_8c_source.html#l01008">1008</a> of file <a class="el" href="mapmat_8c_source.html">mapmat.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e53b58e09df6ccf29305fb05aac16e30.html">algebra</a></li><li class="navelem"><a class="el" href="dir_50322682acf1ecaee1cadf941110c2e1.html">src</a></li><li class="navelem"><a class="el" href="dir_f8bff1f62c8f0a1d7a5e9013e7a2d341.html">mapmat</a></li><li class="navelem"><a class="el" href="mapmat_8c.html">mapmat.c</a></li>
    <li class="footer">Generated on Mon Jul 29 2024 16:33:04 for MIDAPACK - MIcrowave Data Analysis PACKage by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
